apiVersion: batch/v1
kind: Job
metadata:
  name: stage-workflow-and-params
spec:
  template:
    spec:
      containers:
      - name: stage-workflow-and-params
        image: curlimages/curl
        command: ["/bin/sh"]
        args:
          - -c
          - >-
            cd /calrissian/input-data &&
            curl -O https://raw.githubusercontent.com/pymonger/soamc-cwl-demo/develop/baseline-pge/baseline-pge-workflow-job.yml &&
            curl -O https://raw.githubusercontent.com/pymonger/soamc-cwl-demo/develop/baseline-pge/baseline-pge-workflow.cwl &&
            curl -O https://raw.githubusercontent.com/pymonger/soamc-cwl-demo/develop/baseline-pge/stage-in-job.yml &&
            curl -O https://raw.githubusercontent.com/pymonger/soamc-cwl-demo/develop/baseline-pge/stage-in.cwl &&
            curl -O https://raw.githubusercontent.com/pymonger/soamc-cwl-demo/develop/baseline-pge/run-pge-job.yml &&
            curl -O https://raw.githubusercontent.com/pymonger/soamc-cwl-demo/develop/baseline-pge/run-pge.cwl &&
            curl -O https://raw.githubusercontent.com/pymonger/soamc-cwl-demo/develop/baseline-pge/stage-out-job_k8s.yml &&
            curl -O https://raw.githubusercontent.com/pymonger/soamc-cwl-demo/develop/baseline-pge/stage-out.cwl
        volumeMounts:
        - mountPath: /calrissian/input-data
          name: calrissian-input-data
      restartPolicy: OnFailure
      volumes:
      - name: calrissian-input-data
        persistentVolumeClaim:
          claimName: calrissian-input-data
